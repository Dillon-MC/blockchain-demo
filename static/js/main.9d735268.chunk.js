(this["webpackJsonpblockchain-demo"]=this["webpackJsonpblockchain-demo"]||[]).push([[0],{119:function(e,n,t){},121:function(e,n,t){},122:function(e,n,t){},126:function(e,n){},128:function(e,n){},138:function(e,n){},140:function(e,n){},167:function(e,n){},169:function(e,n){},170:function(e,n){},175:function(e,n){},177:function(e,n){},196:function(e,n){},208:function(e,n){},211:function(e,n){},215:function(e,n,t){},216:function(e,n,t){},217:function(e,n,t){},218:function(e,n,t){},219:function(e,n,t){},220:function(e,n,t){"use strict";t.r(n);var c=t(3),a=t.n(c),r=t(113),s=t.n(r),o=(t(119),t(17)),i=t(14),u=t.n(i),h=t(31),l=t(5),d=(t(121),t(122),t(62)),p=t.n(d),f=t(62),b=function(){var e=Object(h.a)(u.a.mark((function e(n){var t,c,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.index,c=n.data,a=n.prevBlock,r={index:t,nonce:0,data:c,timestamp:a?(new Date).toUTCString():"Sat, 24 Apr 2021 14:32:41 GMT",prevHash:a?a.hash:"0",hash:""},j(r).then((function(e){return r.hash=e})),e.abrupt("return",Promise.resolve(r));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),j=function(){var e=Object(h.a)(u.a.mark((function e(n){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("000"!==(t=n.hash).slice(0,3)){e.next=3;break}return e.abrupt("return",Promise.resolve(t));case 3:for(;"000"!==t.slice(0,3);)n.nonce++,t=f.createHash("SHA256").update(n.index+n.timestamp+"".concat(n.data)+n.prevHash+n.nonce).digest("hex");return e.abrupt("return",Promise.resolve(t));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=t(0),v=function(e){var n=e.blockData,t=e.selectedPeer,c=w(),a=function(e){return c.setRefreshes(c.refreshes++),p.a.createHash("SHA256").update(e.index+e.timestamp+"".concat(e.data)+e.prevHash+e.nonce).digest("hex")},r=function(){return"000"===n.hash.slice(0,3)},s=function(){for(var e=n.index+1;e<c.chains[t].length;e++){var r=c.chains[t][e];r.index>0&&(r.prevHash=c.chains[t][e-1].hash),r.hash=a(r),c.setRefreshes(c.refreshes++)}};return Object(x.jsxs)("div",{className:"block",children:[Object(x.jsxs)("span",{className:"blockheader",children:[Object(x.jsx)("h4",{children:"INDEX: #".concat(n.index)}),Object(x.jsx)("h5",{children:n.nonce})]}),Object(x.jsx)("input",{className:"blockdatainput",name:"blockdatainput",type:"text",value:n.data,onChange:function(e){return function(e){var r=c.chains[t][n.index];r.data=e,r.hash=a(r),c.setRefreshes(c.refreshes++),s()}(e.target.value)}}),Object(x.jsxs)("div",{className:"hashcontainer",children:[Object(x.jsx)("h6",{children:"PREVIOUS HASH"}),Object(x.jsx)("div",{className:"prevhash hash",style:"000"!==n.prevHash.slice(0,3)&&n.index>0?{color:"red",borderColor:"rgb(238, 62, 62)",backgroundColor:"rgb(241, 181, 181)"}:{color:"rgb(62, 238, 120)",borderColor:"rgb(62, 238, 120)",backgroundColor:"rgb(181, 241, 201)"},children:n.prevHash}),Object(x.jsx)("h6",{children:"HASH"}),Object(x.jsx)("div",{className:"hash",style:r()?{color:"rgb(62, 238, 120)",borderColor:"rgb(62, 238, 120)",backgroundColor:"rgb(181, 241, 201)"}:{color:"red",borderColor:"rgb(238, 62, 62)",backgroundColor:"rgb(241, 181, 181)"},children:n.hash})]}),!r()&&Object(x.jsxs)("span",{className:"material-icons mineblockbtn",onClick:function(){j(n).then((function(e){c.chains[t][n.index].hash=e,c.chains[t][n.index].timestamp=(new Date).toUTCString(),c.setRefreshes(c.refreshes++),s()})),c.setRefreshes(c.refreshes++)},children:[Object(x.jsx)("div",{className:"tooltip",children:"MINE"}),"build_circle"]}),Object(x.jsx)("footer",{children:n.timestamp})]})},O=(t(215),function(e){return Object(x.jsx)("div",{className:"chain",children:e.children})}),C=(t(216),t(63)),g={dictionaries:[C.a]},m=function(e){var n=e.selectedPeer,t=e.peerIndex,a=e.selectPeer,r=e.setCurrentChain,s=Object(c.useState)(""),o=Object(l.a)(s,2),i=o[0],u=o[1];Object(c.useEffect)((function(){u(Object(C.b)(g))}),[]);var h=Object(c.useState)(!1),d=Object(l.a)(h,2),p=d[0],f=d[1],b=Object(c.useState)(0),j=Object(l.a)(b,2),v=j[0],O=j[1],m=w(),k=t;Object(c.useEffect)((function(){f(n===k)}),[n,v]);return Object(x.jsxs)("div",{className:"peer",onClick:function(){a(k),r(m.chains[k])},children:[p?null:m.peers[k].getConnectedPeers().includes(n)?Object(x.jsx)("span",{className:"material-icons toggleconnectIcon",style:{color:"red"},onClick:function(e){m.peers[k].disconnectPeer({peer:n,appContext:m}),O(0===v?1:0),e.stopPropagation()},children:"remove_circle"}):Object(x.jsx)("span",{onClick:function(e){m.peers[k].connectToPeer({appContext:m,peerIndex:n}),O(0===v?1:0),e.stopPropagation()},className:"material-icons toggleconnectIcon",children:"add_circle"}),Object(x.jsx)("span",{className:"material-icons peerIcon",style:p?{color:"darkgray"}:m.peers[k].getConnectedPeers().includes(n)?{color:"rgb(20, 230,  120)"}:{color:"rgb(71, 135, 255)"},children:"account_circle"}),Object(x.jsx)("div",{children:i})]})},k=(t(217),function(e){return Object(x.jsx)("div",{className:"peerlist",children:e.children})}),P=(t(218),function(e){var n=e.addPeer,t=w(),a=Object(c.useState)(!1),r=Object(l.a)(a,2),s=r[0],o=r[1];return Object(x.jsxs)("button",{className:"addpeerbtn",disabled:s,onClick:function(){o(!0),setTimeout((function(){o(!1)}),700),t.addChain(),n()},children:[Object(x.jsx)("div",{className:"tooltip",children:"ADD PEER"}),Object(x.jsx)("span",{className:"material-icons",children:"add"})]})}),N=(t(219),function(e){var n=e.selectedPeer,t=w(),a=Object(c.useState)(""),r=Object(l.a)(a,2),s=r[0],o=r[1];return Object(x.jsx)("div",{className:"addblockform",children:Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("input",{className:"blockdatainput",type:"text",placeholder:"BLOCK #".concat(t.chains[n].length),onChange:function(e){o(e.target.value)}}),Object(x.jsx)("button",{id:"addblockbtn",onClick:function(){b({index:t.chains[n].length,data:s,prevBlock:t.chains[n][t.chains[n].length-1]}).then((function(e){t.addBlockToChain(e,n),t.peers[n].sendBlockToPeers({block:e,appContext:t,chain:t.chains[n]})}))},children:"Add Block"})]})})}),H=t(114),S=t(18),T="REQUEST_CHAIN",B="BLOCK",I=function(e){var n=[],t=function(t){var a=t.block,r=t.chain,o=t.appContext,i=o.chains[e][o.chains[e].length-1],u=a;if("000"===u.hash.slice(0,3)&&!(u.index>0&&"000"!==u.prevHash.slice(0,3)))return u.index<=i.index?void 0:u.prevHash===i.hash?(o.addBlockToChain(u,e),void s({block:a,appContext:o,chain:r})):(c({chain:r,appContext:o}),void n.forEach((function(e){return o.peers[e].processMessage({event:T,msg:{chain:r,appContext:o}})})))},c=function(n){var t=n.chain,c=n.appContext,r=t.sort((function(e,n){return e.index-n.index}));r.length>=c.chains[e].length&&a({chain:t,appContext:c})&&c.replaceChain(e,r)},a=function(n){var t=n.chain,c=n.appContext,a=t[0];if(!r(c.chains[e][0].hash,a))return console.log("invalid chain"),!1;var s,o=Object(H.a)(t);try{for(o.s();!(s=o.n()).done;){var i=s.value;if(i.prevHash!==a.hash&&0!==i.index)return!1;if("000"!==i.hash.slice(0,3))return!1;a=i}}catch(u){o.e(u)}finally{o.f()}return!0},r=function(e,n){return function(e){var n=e.hash;if("000"===n.slice(0,3))return n;for(;"000"!==n.slice(0,3);)e.nonce++,n=f.createHash("SHA256").update(e.index+e.timestamp+"".concat(e.data)+e.prevHash+e.nonce).digest("hex");return n}(n)===e},s=function(e){var t=e.block,c=e.appContext,a=e.chain;n.forEach((function(e){c.peers[e].processMessage({event:B,msg:{block:t,chain:a,appContext:c}})}))};return{processMessage:function(e){var n=e.event,a=e.msg;switch(n){case B:t(Object(S.a)({},a));break;case T:c(Object(S.a)({},a))}},requestLatestBlock:function(n){var t=n.appContext,c=n.peerIndex,a=t.chains[e];t.peers[c].processMessage({event:B,msg:{block:a[a.length-1],chain:a,appContext:t}})},connectToPeer:function(t){var c=t.appContext,a=t.peerIndex;n.includes(a)||(n.push(a),c.peers[a].connectToPeer({appContext:c,peerIndex:e}),c.peers[a].requestLatestBlock({appContext:c,peerIndex:e}))},disconnectPeer:function(t){var c=t.peer,a=t.appContext;n.includes(c)&&(n.splice(n.indexOf(c),1),a.peers[c].disconnectPeer({peer:e,appContext:a}))},sendBlockToPeers:s,getConnectedPeers:function(){return n}}},E={refreshes:0,peers:[I(0)],chains:[[]],setRefreshes:function(e){},setPeerChain:function(e,n){},addBlockToChain:function(e,n){},addChain:function(){},replaceChain:function(e,n){}},y=Object(c.createContext)(E),w=function(){return Object(c.useContext)(y)};var A=function(){var e=Object(c.useState)(w().refreshes),n=Object(l.a)(e,2),t=n[0],a=n[1],r=function(){var e=Object(h.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b({index:0,data:"genesis block",prevBlock:null}).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(e){return{index:e.index,nonce:e.nonce,data:"".concat(e.data),timestamp:(new Date).toUTCString(),prevHash:"".concat(e.prevHash),hash:"".concat(e.hash)}},i=Object(c.useState)([I(0)]),d=Object(l.a)(i,2),p=d[0],f=d[1],j=Object(c.useState)(0),C=Object(l.a)(j,2),g=C[0],H=C[1],S=Object(c.useState)([[]]),T=Object(l.a)(S,2),B=T[0],E=T[1],A=Object(c.useState)(B[0]),R=Object(l.a)(A,2),D=R[0],M=R[1];return Object(c.useEffect)((function(){r().then((function(e){E([[e]]),M([e])}))}),[]),Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(y.Provider,{value:{refreshes:t,setRefreshes:a,peers:p,chains:B,setPeerChain:function(e,n){B[e]=n},addBlockToChain:function(e,n){var t=s(e);B[n]=[].concat(Object(o.a)(B[n]),[t]),n===g&&M([].concat(Object(o.a)(D),[t]))},addChain:function(){r().then((function(e){return E([].concat(Object(o.a)(B),[[e]]))}))},replaceChain:function(e,n){B[e]=[],n.forEach((function(n){B[e].push(s(n))})),M(n)}},children:[Object(x.jsx)(k,{children:p.map((function(e,n){return Object(x.jsx)(m,{peerIndex:n,selectedPeer:g,selectPeer:H,setCurrentChain:M},"p".concat(n))}))}),Object(x.jsx)(N,{selectedPeer:g}),Object(x.jsx)(P,{addPeer:function(){f([].concat(Object(o.a)(p),[I(p.length)]))}}),Object(x.jsx)(O,{children:D&&D.map((function(e){return Object(x.jsx)(v,{blockData:e,selectedPeer:g},e.index+g)}))})]})})},R=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,221)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,r=n.getLCP,s=n.getTTFB;t(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(A,{})}),document.getElementById("root")),R()}},[[220,1,2]]]);
//# sourceMappingURL=main.9d735268.chunk.js.map